
# java内存组成介绍：堆(Heap)和非堆(Non-heap)内存
Java 虚拟机具有一个堆，堆是运行时数据区域，所有类实例和数组的内存均从此处分配。堆是在 Java 虚拟机启动时创建的。”“在JVM中堆之外的内存称为非堆内存(Non-heap memory)”。可以看出JVM主要管理两种类型的内存：堆和非堆。简单来说堆就是Java代码可及的内存，是留给开发人员使用的；非堆就是JVM留给 自己用的，所以方法区、JVM内部处理或优化所需的内存(如JIT编译后的代码缓存)、每个类结构(如运行时常数池、字段和方法数据)以及方法和构造方法 的代码都在非堆内存中

# jvm
-Xms 堆内存的最小值，（虚拟机启动后，就会分配这么大的堆内存）默认当空余堆内存充足到大于指定阈值时，JVM会减小heap的大小到-Xms指定的大小，例如设置-Xms3550m -Xms2g -Xms128k
-Xmx 堆内存的最大值，默认当空余堆内存小于指定阈值时，JVM会增大Heap到-Xmx指定的大小；如果设置与-Xms相同，可以避免每次垃圾回收完成后JVM重新分配内存
-Xmn2g：设置年轻代大小为2G。整个JVM内存大小=年轻代大小 + 年老代大小 + 持久代大小。持久代一般固定大小为64m，所以增大年轻代后，将会减小年老代大小。此值对系统性能影响较大，Sun官方推荐配置为整个堆的3/8。
-Xss128k： 设置每个线程的堆栈大小。JDK5.0以后每个线程堆栈大小为1M，以前每个线程堆栈大小为256K。更具应用的线程所需内存大小进行调整。在相同物理内 存下，减小这个值能生成更多的线程。但是操作系统对一个进程内的线程数还是有限制的，不能无限生成，经验值在3000~5000左右
