内核编译
查看设备
/proc/devices
主设备号：类型
次设备号：对象，主设备号用来标识与设备文件相连的驱动程序，用来反映设备类型。次设备号被驱动程序用来辨别操作的是哪个设备，用来区分同类型的设备。
ls -l /dev
内核日志输出
dmesg |tail
echo -n 1234 > /dev/memory
mknod /dev/memory c 60 0
sudo chmod 666 /dev/memory
module.c
MakeFile
>make
>sudo insmod /home/hill/Documents/module.ko
>sudo rmmod module
设备驱动是操作系统和输入输出设备间的粘合剂。驱动负责将操作系统的请求传输，转化为特定物理设备控制器能够理解的命令。
linux系统将设备分为3类：字符设备、块设备、网络设备。
字符设备：是指只能一个字节一个字节读写的设备，不能随机读取设备内存中的某一数据，读取数据需要按照先后数据。字符设备是面向流的设备，常见的字符设备有鼠标、键盘、串口、控制台和LED设备等。
每一个字符设备或块设备都在/dev目录下对应一个设备文件。linux用户程序通过设备文件（或称设备节点）来使用驱动程序操作字符设备和块设备。
//////////////////////////////////////////////////////////////////////
cdev（字符设备结构体）
【第一步:申请设备号:
动态申请简单
【第二步: 初始化cdev
【第三步:注册cdev
【第四步: 硬件初始化
申请GPIO资源+配置输入
//////////////////////////////////////////////////////////////////////
实现设备操作
【open read write close
//////////////////////////////////////////////////////////////////////
驱动注销
【第一步: 删除cdev
【第二步: 释放设备号
//////////////////////////////////////////////////////////////////////
字符设备驱动程序
1. 什么是Makefile？
Makefile 文件描述了整个工程的编译、连接等规则。其中包括：工程中的哪些源文件需要编译以及
如何编译、需要创建那些库文件以及如何创建这些库文件、如何最后产生我们想要的可执行文件。
2. 什么是模块化编程？为什么要采用模块化编程？
将一个大程序按照功能划分为若干小程序模块，每个小程序模块完成一个确定的功能，并在这些模块
之间建立必要的联系，通过模块的互相协作完成整个功能。
便于分工，它还有助于程序的调试，有利于程序结构的划分，还能增加程序的可读性和可移植性。
3. 如何理解设备号？什么是主设备号，次设备号？
主设备号被系统用来确定驱动程序（设备类型：如USB设备，硬盘设备），次设备号被驱动程序用来确
定具体的设备。
4. 整个驱动从编译到用测试程序进行测试的全过程，需要掌握相关的各种操作命令。
5. 三个重要的数据结构（结构体）： file_operations、 inode、 file，尤其是file_operations
file_operations:
该结构是将系统调用 和驱动程序连接起来，这个结构的每一成员都对应着一个系统调用。当用户进程
利用系统调用对设备进行读写操作的时候，这些系统调用通过设备节点中的主设备号和次设备号来确
定相应的驱动程序，而每一个字符驱动在linux内核中又是由cdev结构体来描述的，其中cdev结构体
中含有成员 fops结构体，然后就可以读取file_operations结构体中相应的函数指针，接着把控制权
交给函数，从而完成linux设备驱动程序的工作。
file:
表示一个打开的文件（文件的描述符），由内核在open（）时创建，并（将该文件描述符）传递给该
文件上进行操作的所有函数，直到最后的close函数，在文件的所有实例都被关闭后，内核会释放这个
数据结构。主要供与文件系统对应的设备文件驱动程序使用。
inode:
在linux中inode结构用于表示文件， file结构表示打开的文件的描述，因为对于单个文件而言可能会
有许多个表示打开的文件的描述符，因而就可能会的对应有多个file结构，但是都指向单个inode结
构。
该结构里面包含了很多信息, 但是, 驱动开发者只关心里面两个重要的域:
dev_t i_rdev;
//含有真正的设备号
struct cdev *i_cdev;
//struct cdev是内核内部表示字符设备的结构.
三者之间关系：
struct file结构体中包含有struct file_operations结构体， struct file_operations是
struct file的一个域；我们在使用系统调用open() 打开一个设备节点struct inode时，我们会得
到一个文件struct file, 同时返回一个文件描述符，该文件描述符是一个整数，我们称之为句柄，通
过访问句柄我们能够访问设备文件struct file, 描述符是一个有着特殊含义的整数，特定位都有一定
的意义或属性。
